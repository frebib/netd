# A list of every _todo_ comment in this project
**Please note:** _This file is automatically generated from all TODO comments found within the code_
## [include/netstack/eth/arp.h](include/netstack/eth/arp.h)
  - Line 60: reduce redundant arguments passed to arp_send_req/reply
  - Line 61: infer interface and hwtype based on routing rules

## [include/netstack/intf/intf.h](include/netstack/intf/intf.h)
  - Line 28: Implement 'virtual' network interfaces
  - Line 42: Move arptbl into an 'ethernet' hardware struct into `void *ll`

## [include/netstack/ip/ipv4.h](include/netstack/ip/ipv4.h)
  - Line 30: Take endianness into account in ipv4_hdr

## [include/netstack/ip/route.h](include/netstack/ip/route.h)
  - Line 25: Change addr type from uint32_t to generic inet_addr_t for ipv4/6

## [include/netstack/tcp/tcp.h](include/netstack/tcp/tcp.h)
  - Line 40: Take endianness into account in tcp_hdr
  - Line 99: Fix endianness in tcp.h

## [lib/eth/arp.c](lib/eth/arp.c)
  - Line 73: Check for queued outgoing packets that can
  - Line 114: Implement ARP cache locking
  - Line 137: Use hashtable for ARP lookups on IPv4
  - Line 143: This doesn't account for protocol addresses that change hw
  - Line 185: Use hwtype to determine length and type of address
  - Line 234: Add 'incomplete' entry to arp cache
  - Line 240: Use hwtype to determine length and type of address

## [lib/inet.c](lib/inet.c)
  - Line 20: Use hashtbl instead of list to lookup sockets
  - Line 21: Lock llist socks for concurrent access

## [lib/intf/intf.c](lib/intf/intf.c)
  - Line 110: Implement rx 'software' timestamping
  - Line 117: Conditionally print debugging information
  - Line 134: Use same frame stack instead of cloning across threads
  - Line 202: Check intf hwtype to calculate max frame size
  - Line 228: Selectively choose an appropriate address from intf

## [lib/intf/rawsock.c](lib/intf/rawsock.c)
  - Line 41: This is hacky, assuiming lo is loopback
  - Line 123: Move some of this cleanup logic into a generic intf_free() function
  - Line 132: Ensure frames are destroyed, even if they still have references
  - Line 157: Allocate a buffer from the interface for frame storage
  - Line 162: Find an appropriate size for the control buffer

## [lib/ip/icmp.c](lib/ip/icmp.c)
  - Line 82: Don't assume IPv4 parent
  - Line 88: Fix frame->data pointer head/tail difference

## [lib/ip/ipv4.c](lib/ip/ipv4.c)
  - Line 33: Change to `if (!ipv4_should_accept(frame))` to accept other packets
  - Line 84: Keep track of invalid packets
  - Line 96: Take options into account here
  - Line 103: Other integrity checks
  - Line 105: Change to `if (!ipv4_should_accept(frame))` to accept other packets
  - Line 158: Take source address into route calculation
  - Line 167: Perform correct route/hardware address lookups when appropriate
  - Line 210: Implement ARP cache locking
  - Line 219: Rate limit ARP requests to prevent flooding
  - Line 234: Make this user-configurable

## [lib/ip/route.c](lib/ip/route.c)
  - Line 5: Lock route table for writing
  - Line 18: Define how routes with the same metric should behave?

## [lib/tcp/tcp.c](lib/tcp/tcp.c)
  - Line 18: Work out why sometimes this is 0x0200 too small (in netwk byte-ord)
  - Line 49: Check for TSO and GRO and account for it, somehow..
  - Line 55: Other integrity checks

## [lib/tcp/tcpin.c](lib/tcp/tcpin.c)
  - Line 48: Send TCP RST for invalid connections
  - Line 49: Optionally don't send TCP RST packets
  - Line 111: Implement TCP/IPv4 precedence, IPv6 has no security/precedence
  - Line 138: Don't assume IPv4 parent for tcp_seg_arr()
  - Line 209: Send ECONNERESET to user process
  - Line 218: Implement TCP/IPv4 precedence, IPv6 has no security/precedence
  - Line 273: Remove acknowledged segments from the retransmission queue
  - Line 316: If there are other controls or text in the segment,
  - Line 411: Store out-of-order segments that are >RCV.NXT for later processing
  - Line 434: Differentiate between PASSIVE and ACTIVE open here
  - Line 435: Inform user of ECONNREFUSED if ACTIVE open
  - Line 436: Clear retransmission queue
  - Line 460: Interrupt user send() and recv() calls with ECONNRESET
  - Line 461: Clear retransmission queue
  - Line 479: Clear retransmission queue
  - Line 545: Interrupt user send() and recv() calls with ECONNRESET
  - Line 547: Clear retransmission queue
  - Line 549: Implement RFC 5961 Section 4: Blind Reset Attack on SYN
  - Line 625: Remove any segments from the rtq that are ack'd
  - Line 626: Inform any waiting send() calls when acknowledgements
  - Line 635: Is sending an ACK here necessary?
  - Line 652: Change FIN-WAIT-1 to FIN-WAIT-2 when FIN is ack'ed (?)
  - Line 752: Handle receiving segment payload
  - Line 812: Signal the user 'connection closing'
  - Line 840: Work out if 'our FIN has been ACKed'

## [lib/tcp/tcpout.c](lib/tcp/tcpout.c)
  - Line 15: Allow for tcp_hdr->hlen options
  - Line 17: Vary hdr->wind in tcp_send()
  - Line 24: Don't assume IPv4 L3, choose based on sock->saddr
  - Line 34: Don't assume IPv4 pseudo-header for checksumming
  - Line 40: Implement functionality to specify IP flags (different for IP4/6?)
  - Line 47: Work out route interface before allocating buffer
  - Line 55: Allow for attaching data to SYN/ACK packet
  - Line 59: Allocate space for TCP options
  - Line 70: Work out route interface before allocating buffer
  - Line 76: Allocate space for TCP options
  - Line 87: Work out route interface before allocating buffer
  - Line 93: Allocate space for TCP options
  - Line 104: Work out route interface before allocating buffer
  - Line 110: Allocate space for TCP options
  - Line 121: Work out route interface before allocating buffer
  - Line 127: Allocate space for TCP options

## [tools/netd/src/main.c](tools/netd/src/main.c)
  - Line 17: Add many configurable interfaces
  - Line 18: Add loopback interface
  - Line 52: Take different socket types into account here
  - Line 54: For now, assume everything is ethernet
