# A list of every _todo_ comment in this project
**Please note:** _This file is automatically generated from all TODO comments found within the code_
## [include/netstack/eth/arp.h](include/netstack/eth/arp.h)
  - Line 67: reduce redundant arguments passed to arp_send_req/reply
  - Line 68: infer interface and hwtype based on routing rules

## [include/netstack/intf/intf.h](include/netstack/intf/intf.h)
  - Line 27: Implement 'virtual' network interfaces
  - Line 41: Move arptbl into an 'ethernet' hardware struct into `void *ll`

## [include/netstack/ip/ipv4.h](include/netstack/ip/ipv4.h)
  - Line 30: Take endianness into account in ipv4_hdr

## [include/netstack/tcp/tcp.h](include/netstack/tcp/tcp.h)
  - Line 47: Take endianness into account in tcp_hdr
  - Line 167: Fix endianness in tcp.h

## [lib/eth/arp.c](lib/eth/arp.c)
  - Line 160: Use hashtable for ARP lookups on IPv4
  - Line 171: ARP doesn't account for protocol addresses that change hw
  - Line 238: Use hwtype to determine length and type of address
  - Line 239: Change arp_send_req to handle other address types
  - Line 315: Change arp_send_reply to handle other address types
  - Line 321: Use hwtype to determine length and type of address

## [lib/frame.c](lib/frame.c)
  - Line 76: Deduplicate frame_decref_unlock() code

## [lib/inet.c](lib/inet.c)
  - Line 20: Use hashtbl instead of list to lookup sockets

## [lib/intf/intf.c](lib/intf/intf.c)
  - Line 110: Implement rx 'software' timestamping
  - Line 121: Conditionally print debugging information
  - Line 200: Check intf hwtype to calculate max frame size
  - Line 230: Selectively choose an appropriate address from intf

## [lib/intf/rawsock.c](lib/intf/rawsock.c)
  - Line 39: This is hacky, assuiming lo is loopback
  - Line 131: Move some of this cleanup logic into a generic intf_free() function
  - Line 140: Ensure frames are destroyed, even if they still have references
  - Line 165: Allocate a buffer from the interface for frame storage
  - Line 170: Find an appropriate size for the control buffer

## [lib/ip/icmp.c](lib/ip/icmp.c)
  - Line 91: Don't assume IPv4 parent
  - Line 96: Find ICMP route
  - Line 112: Fix frame->data pointer head/tail difference

## [lib/ip/ipv4.c](lib/ip/ipv4.c)
  - Line 45: Change to `if (!ipv4_should_accept(frame))` to accept other packets
  - Line 100: Keep track of invalid packets
  - Line 112: Take options into account here
  - Line 119: Other integrity checks
  - Line 121: Change to `if (!ipv4_should_accept(frame))` to accept other packets
  - Line 149: Dynamically allocate IPv4 header space
  - Line 157: Make this user-configurable

## [lib/ip/neigh.c](lib/ip/neigh.c)
  - Line 15: Take source address into route calculation
  - Line 31: Perform correct route/hardware address lookups when appropriate
  - Line 123: Rate limit ARP requests to prevent flooding
  - Line 133: Use inet_socket for passing options to neighbour

## [lib/ip/route.c](lib/ip/route.c)
  - Line 30: Define how routes with the same metric should behave?

## [lib/tcp/tcp.c](lib/tcp/tcp.c)
  - Line 20: Work out why sometimes this is 0x0200 too small (in netwk byte-ord)
  - Line 107: Check for TSO and GRO and account for it, somehow..
  - Line 116: Other integrity checks
  - Line 125: Perform queued actions when reaching certain states
  - Line 238: Choose a random unused outgoing port
  - Line 243: Choose a secure initial sequence number
  - Line 257: Ensure no off-by-one errors in tcp_recvqueue_contigseq

## [lib/tcp/tcpin.c](lib/tcp/tcpin.c)
  - Line 44: * TODO: Treat all seq and ack number arithmetic modulo UINT32_MAX
  - Line 81: Send TCP RST for invalid connections
  - Line 82: Optionally don't send TCP RST packets
  - Line 152: Implement TCP/IPv4 precedence, IPv6 has no security/precedence
  - Line 255: Implement TCP/IPv4 precedence, IPv6 has no security/precedence
  - Line 310: Remove acknowledged segments from the retransmission queue
  - Line 334: Send pending data it the sndbuf
  - Line 358: If there are other controls or text in the segment,
  - Line 453: Store out-of-order segments that are >RCV.NXT for later processing
  - Line 479: Inform user of ECONNREFUSED
  - Line 480: Clear retransmission queue
  - Line 505: Interrupt user send() and recv() calls with ECONNRESET
  - Line 506: Clear retransmission queue
  - Line 525: Clear retransmission queue
  - Line 591: Interrupt user send() and recv() calls with ECONNRESET
  - Line 594: Clear retransmission queue
  - Line 596: Implement RFC 5961 Section 4: Blind Reset Attack on SYN
  - Line 676: Remove any segments from the rtq that are ack'd
  - Line 677: Inform any waiting send() calls when acknowledgements
  - Line 684: Is sending an ACK here necessary?
  - Line 693: Work out if our FIN was ACK'ed
  - Line 714: Send success to waiting close() calls
  - Line 941: Work out if 'our FIN has been ACKed'
  - Line 945: stop other TCP timers in FIN-WAIT-2
  - Line 959: stop other TCP timers in FIN-WAIT-2
  - Line 1000: Implement locking
  - Line 1001: Restore previous local address if it was set

## [lib/tcp/tcpout.c](lib/tcp/tcpout.c)
  - Line 17: Allow for tcp_hdr->hlen options
  - Line 19: Vary hdr->wind in tcp_send()
  - Line 26: Don't assume IPv4 L3, choose based on sock->saddr
  - Line 36: Don't assume IPv4 pseudo-header for checksumming
  - Line 42: Implement functionality to specify IP flags (different for IP4/6?)
  - Line 48: Work out route interface before allocating buffer
  - Line 55: Allocate space for TCP options
  - Line 71: Work out route interface before allocating buffer
  - Line 79: Implement MSS variability. Default MSS is quite small
  - Line 86: Allocate space for TCP options
  - Line 94: Start the retransmission timeout

## [lib/tcp/tcpuser.c](lib/tcp/tcpuser.c)
  - Line 13: Handle sending SIGPIPE for dead connections to calling process
  - Line 66: Fill out 'user timeout' information
  - Line 92: Check for O_NONBLOCK
  - Line 94: Obtain timespec value for timedwait
  - Line 144: Wait on send() for something? (Buffer is full, wait for space?)
  - Line 151: Write to sndbuf and output directly at the same time
  - Line 159: Signal sending thread and offload segmentation/transmission
  - Line 160: Check for MSG_MORE flag and don't trigger for a short while
  - Line 193: Wait here until there is something to recv
  - Line 199: Send ACKs for data passed to the user (if specified)
  - Line 219: Check that frames are contiguous before recv'ing them
  - Line 220: Don't return EOF until recv'd up to FIN seqn
  - Line 340: Check for MSG_PEEK and conditionally don't do this
  - Line 360: tcp_close() request until all send() calls have completed
  - Line 374: Check for pending send() calls

## [tools/netd/src/main.c](tools/netd/src/main.c)
  - Line 16: Add many configurable interfaces
  - Line 17: Add loopback interface
  - Line 30: Take interface etc. configuration from config file
